-- goot.payment definition

CREATE TABLE `payment` (
  `payment_id` bigint(20) NOT NULL AUTO_INCREMENT,
  `order_id` bigint(20) NOT NULL,
  `payment_method` varchar(30) NOT NULL,
  `payment_status` varchar(20) DEFAULT 'READY' COMMENT 'PAID	결제 승인 성공: PG사로부터 최종적으로 금액 승인 확인 완료.\r\nPENDING	승인 대기: PG사에 결제를 요청했으나, 아직 최종 승인 응답을 받지 못한 상태 (예: 가상계좌 발급 직후). (선택적)\r\nFAILED	결제 실패: 결제 시도 중 카드 오류 등으로 인해 실패함.\r\nCANCELED	취소 완료: 승인된 결제에 대한 취소 요청이 성공적으로 처리됨. (환불 완료를 의미할 수 있음)\r\nPARTIAL_REFUNDED	부분 환불: 결제 금액 중 일부만 환불 처리됨.\r\nREFUNDED	전액 환불: 결제 금액 전체가 환불 처리됨.',
  `tid` varchar(20) NOT NULL COMMENT '카카오페이 TID (UNIQUE 설정)',
  `approved_at` datetime DEFAULT NULL,
  `amount` int(11) NOT NULL,
  `cancel_amount` int(11) DEFAULT 0 COMMENT '취소 금액 (원화이므로 INT)',
  `created_at` datetime DEFAULT current_timestamp(),
  `updated_at` datetime DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`payment_id`),
  UNIQUE KEY `tid` (`tid`),
  KEY `order_id` (`order_id`),
  CONSTRAINT `payment_ibfk_1` FOREIGN KEY (`order_id`) REFERENCES `orders` (`order_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;